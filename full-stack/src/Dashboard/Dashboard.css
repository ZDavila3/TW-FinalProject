/* ===== Dashboard layout ===== */
.dashboard {
  min-height: 100vh;
  padding: 32px 24px 48px 96px;
  transition: padding-left .25s ease;
  background: linear-gradient(135deg, #475697 0%, #764ba2 100%);
}
.dashboard.navbar-expanded { padding-left: 284px; }

.page-container { max-width: 1200px; margin: 0 auto; }

.dashboard-title {
  margin: 0 0 20px;
  color: #fff;
  font-weight: 800;
  letter-spacing: .3px;
  font-size: 2.1rem;
}

/* 2-col on desktop, 1-col on smaller screens */
.dashboard-grid {
  display: grid;
  grid-template-columns: 1.05fr .95fr;
  gap: 24px;
}
@media (max-width: 1080px) { .dashboard-grid { grid-template-columns: 1fr; } }

/* ===== Cards ===== */
.ui-card{
  background: var(--card-bg);
  border: 1px solid var(--card-brd);
  border-radius: 14px;
  box-shadow: var(--shadow);
  backdrop-filter: saturate(130%) blur(8px);
}

.textbox-card,
.uploader-card { padding: 20px; overflow: visible; }

/* ===== Textarea ===== */
.textarea{ width: 100%; min-height: 300px; resize: vertical; }

/* ===== Progress ===== */
.progress-row { margin-top: 12px; }
.progress{
  height: 10px;
  background: rgba(255,255,255,.08);
  border: 1px solid var(--card-brd);
  border-radius: 999px;
  overflow: hidden;
}
.progress .fill{
  height: 100%;
  width: 0;
  background: linear-gradient(90deg, var(--accent), var(--accent-2));
  transition: width .25s ease;
}

/* ===== File Uploader (drag zone) ===== */
.dropzone{
  border: 1.5px dashed rgba(255,255,255,.2);
  border-radius: 12px;
  padding: 18px;
  text-align: center;
  color: var(--muted);
  transition: border-color .2s ease, background .2s ease;
  cursor: pointer;
}
.dropzone.dragover{
  border-color: var(--accent);
  background: rgba(139,92,246,.08);
}

/* ===== Results (pop under) ===== */
.results-panel{
  margin-top: 16px;
  background: var(--card-bg);
  border: 1px solid var(--card-brd);
  border-radius: 12px;
  box-shadow: var(--shadow);
  display: flex;
  flex-direction: column;
  min-height: 460px;                 /* tall by default */
  overflow: hidden;                  /* mask internals */
  animation: resultsIn .25s ease forwards;
}

/* host → sticky tab header + scrollable body */
.results-host{
  display: grid;
  grid-template-rows: auto 1fr;
  min-height: 0;                     /* allow child scrolling */
}
.results-inner{
  min-height: 0;
  overflow: hidden;
}

/* tablist (header) */
.results-panel [role="tablist"]{
  grid-row: 1 / 2;
  position: sticky; top: 0; z-index: 2;
  background: linear-gradient(180deg, rgba(39, 17, 35, 0.88), rgba(17,24,39,.70)) !important;
  border: 0 !important;
  padding: 10px 14px;
  display: flex; gap: 12px; align-items: center;
  backdrop-filter: blur(6px);
}

/* tabs */
.results-panel [role="tab"]{
  background: rgba(255,255,255,.06);
  border: 1px solid var(--card-brd);
  border-radius: 999px;
  padding: 8px 14px;
  font-size: .92rem;
  color: #fff;
  cursor: pointer;
  transition: background .2s ease, transform .08s ease, box-shadow .2s ease;
}
.results-panel [role="tab"][aria-selected="true"]{
  background: linear-gradient(90deg, var(--accent), var(--accent-2));
  color: #fff;
  font-weight: 700;
  box-shadow: 0 4px 16px rgba(139,92,246,.35);
}
.results-panel [role="tab"]:active { transform: translateY(1px); }

/* tab panel (body) — purple/glass surface */
.results-panel [role="tabpanel"]{
  grid-row: 2 / 3;
  flex: 1 1 auto;
  min-height: 0;
  overflow-y: auto;
  padding: 22px 20px;
  margin: 12px 14px 18px;
  background:
    radial-gradient(1200px 600px at 10% 10%, rgba(124,58,237,.18), transparent 60%),
    radial-gradient(800px 500px at 90% 20%, rgba(99,102,241,.16), transparent 60%),
    linear-gradient(180deg, rgba(17,24,39,.55), rgba(17,24,39,.45));
  border: 1px solid rgba(255,255,255,.10);
  border-radius: 14px;
  box-shadow: 0 6px 30px rgba(0,0,0,.25), inset 0 1px 0 rgba(255,255,255,.06);
  color: #eef2ff;
  line-height: 1.55;
  font-size: .95rem;
}

/* inner scroll helper (if your component exposes one) */
.results-scroll{ max-height: 60vh; overflow: auto; padding: 16px; }

/* purple area scrollbar */
.results-panel [role="tabpanel"]::-webkit-scrollbar { width: 10px; }
.results-panel [role="tabpanel"]::-webkit-scrollbar-thumb {
  background: linear-gradient(180deg, var(--accent), var(--accent-2));
  border-radius: 8px;
}
.results-panel [role="tabpanel"]::-webkit-scrollbar-track {
  background: rgba(255,255,255,.05);
  border-radius: 8px;
}

/* typographic polish inside results */
.results-panel [role="tabpanel"] h1,
.results-panel [role="tabpanel"] h2,
.results-panel [role="tabpanel"] h3{
  color: #fff; margin: 0 0 .5rem 0; line-height: 1.25;
}
.results-panel [role="tabpanel"] h2{ font-size: 1.25rem; }
.results-panel [role="tabpanel"] h3{ font-size: 1.05rem; color: #e0e7ff; }
.results-panel [role="tabpanel"] p{ margin: .5rem 0 .9rem; color: #e5e7eb; }
.results-panel [role="tabpanel"] ul,
.results-panel [role="tabpanel"] ol{ margin: .4rem 0 .9rem 1.1rem; color: #e5e7eb; }
.results-panel pre, .results-panel code{
  background: rgba(255,255,255,.06) !important;
  border: 1px solid rgba(255,255,255,.12) !important;
  border-radius: 10px !important;
  color: #f8fafc !important;
  padding: .6rem .75rem !important;
  overflow: auto;
}

/* smooth reveal */
@keyframes resultsIn { to { opacity: 1; transform: translateY(0); } }
.reveal{ opacity: 0; transform: translateY(8px); animation: resultsIn .25s ease forwards; }

/* ===== Safety nets: stop overlap/floaty internals ===== */
.results-panel *{ box-sizing: border-box; max-width: 100%; word-wrap: break-word; }
.results-panel [style*="position:absolute"],
.results-panel [style*="position:fixed"]{ position: static !important; }
.results-panel [style*="height:" ]{ height:auto !important; min-height:auto !important; }
.results-panel [style*="width:"  ]{ max-width:100% !important; }

/* ===== Legacy overrides: kill any old absolute positioning ===== */
.file-uploader-container,
.textbox-container,
.text-processing-status,
.text-element{
  position: static !important;
  transform: none !important;
}
/* ===== FINAL “make it behave” PATCH: stop overlap & force stacking ===== */

/* the results card itself becomes the stacking context */
.results-panel{
  position: relative;        /* new */
  overflow: hidden;          /* keep children inside */
}

/* put the tab header on its own layer, above the body */
.results-panel [role="tablist"]{
  position: relative;        /* instead of sticky for now */
  z-index: 3;                /* always above the panel body */
  border-bottom: 1px solid rgba(240, 97, 97, 0.952) !important;
  margin: 0 0 8px 0;         /* space below header */
}

/* the purple body sits UNDER the tab header and never overlaps it */
.results-panel [role="tabpanel"]{
  position: relative;        /* create stacking context for children */
  z-index: 1;                /* lower than tablist layer */
  margin-top: 0;             /* ensure no negative margins sneak in */
  /* keep the nice purple look you already had */
}

/* Some inner widgets are using transform/absolute and “float” over tabs.
   Nuke those transforms and absolute positioning *inside the purple area only*. */
.results-panel [role="tabpanel"] [style*="position:absolute"]{ position: static !important; top:auto !important; left:auto !important; right:auto !important; }
.results-panel [role="tabpanel"] [style*="position:fixed"]{ position: static !important; }
.results-panel [role="tabpanel"] [style*="transform"]{ transform: none !important; }

/* Make sure the tab content can actually scroll without affecting the header */
.results-panel [role="tabpanel"]{
  max-height: 60vh;          /* keeps it big but contained */
  overflow: auto;
}

/* If any inner container tried to set its own z-index ridiculously high,
   cap it so it can’t cover the header or spill outside. */
.results-panel [role="tabpanel"] *{
  max-width: 100%;
  box-sizing: border-box;
  word-wrap: break-word;
  z-index: 1 !important;
}

/* Tabs look pill-y and sit comfortably above the purple body */
.results-panel [role="tab"]{
  border-radius: 999px;
}
/* ===== CleanResults skin (contained + cute) ===== */
.cr-panel {
  display: flex;
  flex-direction: column;
  gap: 10px;
  padding: 14px;
  border-radius: 12px;
  background: var(--card-bg);
  border: 1px solid var(--card-brd);
  box-shadow: var(--shadow);
  isolation: isolate;   /* creates a safe stacking context */
}

.cr-header {
  display: flex; align-items: center; justify-content: space-between;
  gap: 12px;
}
.cr-title { color:#fff; font-weight:800; font-size: 1.2rem; line-height:1.1; }
.cr-subtitle { color:#c7cbe5; font-size:.85rem; opacity:.85; }

.cr-actions { display:flex; gap:8px; }
.cr-btn {
  background: linear-gradient(90deg, var(--accent), var(--accent-2));
  color:#fff; border:0; padding:8px 12px; border-radius:8px; cursor:pointer;
}
.cr-btn.outline {
  background: transparent; color:#fff;
  border:1px solid var(--card-brd);
}

.cr-tabs { display:flex; gap:10px; padding: 6px 2px; }
.cr-tab {
  background: rgba(255,255,255,.06);
  border: 1px solid var(--card-brd);
  color:#fff; padding:8px 12px; border-radius:999px; cursor:pointer;
  font-size:.92rem;
}
.cr-tab.active {
  background: linear-gradient(90deg, var(--accent), var(--accent-2));
  box-shadow: 0 4px 16px rgba(139,92,246,.35);
  font-weight:700;
}

.cr-body { min-height: 360px; max-height: 62vh; overflow: hidden; }
.cr-surface {
  height: 100%; max-height: 62vh; overflow: auto;
  padding: 16px; border-radius: 12px;
  background:
    radial-gradient(1200px 600px at 10% 10%, rgba(89, 7, 231, 0.973), transparent 60%),
    radial-gradient(800px 500px at 90% 20%, rgb(219, 219, 219), transparent 60%),
    linear-gradient(180deg, rgb(236, 236, 236), rgba(17,24,39,.45));
  border: 1px solid rgba(255,255,255,.10);
  box-shadow: inset 0 1px 0 rgba(255,255,255,.06);
}

.cr-pre {
  margin:0; white-space: pre-wrap; color:#eef2ff; line-height:1.55; font-size:.96rem;
}

/* small utilities */
.cr-stats { color:#e8eaff; display:grid; gap:6px; }
.cr-error { color:#ffb4b4; }


